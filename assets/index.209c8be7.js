import{F as w}from"./flex.13b244e3.js";import{S as F,D as x,E as I,F as C,a as $}from"./side-footer.5210b0d2.js";import{ad as B,r as E,w as b,f as k,q as f,o as d,c as A,e as _,X as S,u as l,p as j,k as T,_ as z,Z as L,g as D,$ as p,j as a,t as U,a0 as q,F as N}from"./index.8f380576.js";import"./gh-repo.vue_vue_type_script_setup_true_lang.f3cf977d.js";import"./Numbers.a8081be9.js";function O(o,n){const i=new AbortController,e=Object.assign({},n);if(e.signal)throw new Error("signal must be not set");e.signal=i.signal;const s=fetch(o,n);return s.cancel=i.abort.bind(i),s}function P(o){const i=B(`q/${o}`,{state:()=>({loading:!1,data:void 0,error:void 0,canceller:void 0}),getters:{initialized:e=>!!(e.data||e.error||e.loading),finishedAt:e=>{if(e.data)return new Date(e.data.finishedAt)},single:e=>{var s;return(s=e.data)==null?void 0:s.data[0]}},actions:{reload(){if(this.loading)return;this.loading=!0,this.error=void 0;const e=O(`https://api.ossinsight.io/q/${o}`);this.canceller=e.cancel,e.then(s=>{if(s.ok)return s.json();throw new Error(s.statusText)}).then(s=>{this.data=s}).catch(s=>{this.error=s}).finally(()=>{this.loading=!1,this.canceller=void 0})},cancel(){var e;(e=this.canceller)==null||e.call(this)}}})();return i.initialized||i.reload(),i}function V(o){const n=E(0);return b(o,(i,e,s)=>{n.value=i-1;const r=setInterval(()=>{n.value===0&&(n.value=i-1),n.value-=1},1e3);s(()=>clearInterval(r))},{immediate:!0}),n}const H=o=>(j("data-v-44b9c058"),o=o(),T(),o),R=H(()=>_("circle",{r:"70",cx:"100",cy:"100"},null,-1)),X=k({__name:"count-down",props:{duration:null,size:null},emits:["tick"],setup(o,{emit:n}){const i=o,e=V(()=>i.duration),s=f(()=>e.value/(i.duration-1));return b(e,r=>{r===0&&n("tick")}),(r,t)=>(d(),A("svg",{style:S({width:o.size,height:o.size}),width:"200",height:"200",viewBox:"0 0 200 200"},[R,_("circle",{class:"bar",r:"70",cx:"100",cy:"100",pathLength:"100","stroke-dasharray":"100",style:S({strokeDashoffset:`${l(s)*100}px`})},null,4)],4))}});const Z=z(X,[["__scopeId","data-v-44b9c058"]]),G=k({__name:"side",setup(o){const n=P("live-time-base-information-hourly"),i=L(),e=f(()=>{var c,u,h,m,g,v,y;const t=n.single;return{developers:(c=t==null?void 0:t.developers)!=null?c:0,repositories:(u=t==null?void 0:t.repos)!=null?u:0,merged:(h=t==null?void 0:t.merged_prs)!=null?h:0,opened:(m=t==null?void 0:t.opened_prs)!=null?m:0,closed:(g=t==null?void 0:t.closed_prs)!=null?g:0,additions:(v=t==null?void 0:t.additions)!=null?v:0,deletions:(y=t==null?void 0:t.deletions)!=null?y:0}}),s=new Intl.DateTimeFormat("en",{timeStyle:"medium"}),r=f(()=>n.finishedAt?s.format(n.finishedAt):"--");return(t,c)=>(d(),D(w,{class:"side-container"},{default:p(()=>[a(F,q(l(e),{time:"LAST 24 HOURS"}),{footer:p(()=>[a(w,{class:"footer",direction:"row",align:"center",justify:"flex-start",gap:"8px"},{default:p(()=>[a(Z,{size:"12px",duration:20,onTick:c[0]||(c[0]=u=>l(n).reload())}),_("span",null," Last Updated At: "+U(l(r)),1)]),_:1})]),_:1},16),l(i).height>=400?(d(),A(N,{key:0},[a(x,{style:{margin:"8px 2px"}}),a(I),a(x)],64)):(d(),D(C,{key:1})),a($)]),_:1}))}});const Y=z(G,[["__scopeId","data-v-3a886fd1"]]);export{Y as default};

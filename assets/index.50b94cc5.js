import{e as m,l as v,Z as g,a as f,w as b,k,f as p,$ as E,o as i,i as t,a0 as _,u as M,b as h,F as x}from"./index.32f07618.js";import{u as F}from"./gh-repo.vue_vue_type_script_setup_true_lang.1efa13b2.js";import{F as I,a as w}from"./gh-user.vue_vue_type_script_setup_true_lang.0814384e.js";import{S as y,D as d,E as S,a as C}from"./side-footer.f38cba20.js";const R=m({__name:"side",setup(D){const c=v("pullRequestEvents"),l=F(),n=c(),u=g(),e=f({developers:0,repositories:0,merged:0,opened:0,closed:0,additions:0,deletions:0});function o(s){return Object.values(s).reduce((r,a)=>r+parseInt(a),0)}return b(n.firstMessage,s=>{s&&(e.developers=parseInt(s.sumMap.dev),e.repositories=parseInt(s.sumMap.repo),e.additions=parseInt(s.sumMap.additions),e.deletions=parseInt(s.sumMap.deletions),e.merged=o(s.mergeMap),e.opened=o(s.openMap),e.closed=o(s.closeMap))},{immediate:!0}),k(s=>{if(l.value){const r=n.stream.subscribe(a=>{switch(a.isDevYear&&e.developers++,a.isRepoYear&&e.repositories++,a.prEventType){case"merged":e.merged++,e.additions+=parseInt(a.additions),e.deletions+=parseInt(a.deletions);break;case"opened":e.opened++;break;case"closed":e.closed++;break}});s(()=>r.unsubscribe())}}),(s,r)=>(i(),p(I,{class:"side-container"},{default:E(()=>[t(y,_(e,{time:`in ${new Date().getUTCFullYear()}`}),null,16,["time"]),M(u).height>=400?(i(),h(x,{key:0},[t(d,{style:{margin:"8px 2px"}}),t(S),t(d)],64)):(i(),p(w,{key:1})),t(C)]),_:1}))}});export{R as default};

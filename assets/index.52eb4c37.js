import{f as m,n as g,Z as v,d as f,w as b,l as E,g as p,$ as _,o as i,j as a,a0 as k,u as F,c as M,F as h}from"./index.76d9e870.js";import{u as x}from"./Numbers.8265171b.js";import{F as I}from"./flex.8250aaad.js";import{S as w,D as d,E as y,F as S,a as C}from"./side-footer.4de18b1e.js";import"./gh-repo.vue_vue_type_script_setup_true_lang.fea0e203.js";const R=m({__name:"side",setup(D){const c=g("pullRequestEvents"),l=x(),n=c(),u=v(),e=f({developers:0,repositories:0,merged:0,opened:0,closed:0,additions:0,deletions:0});function o(s){return Object.values(s).reduce((r,t)=>r+parseInt(t),0)}return b(n.firstMessage,s=>{s&&(e.developers=parseInt(s.sumMap.dev),e.repositories=parseInt(s.sumMap.repo),e.additions=parseInt(s.sumMap.additions),e.deletions=parseInt(s.sumMap.deletions),e.merged=o(s.mergeMap),e.opened=o(s.openMap),e.closed=o(s.closeMap))},{immediate:!0}),E(s=>{if(l.value){const r=n.stream.subscribe(t=>{switch(t.isDevYear&&e.developers++,t.isRepoYear&&e.repositories++,t.prEventType){case"merged":e.merged++,e.additions+=parseInt(t.additions),e.deletions+=parseInt(t.deletions);break;case"opened":e.opened++;break;case"closed":e.closed++;break}});s(()=>r.unsubscribe())}}),(s,r)=>(i(),p(I,{class:"side-container"},{default:_(()=>[a(w,k(e,{time:`in ${new Date().getUTCFullYear()}`}),null,16,["time"]),F(u).height>=400?(i(),M(h,{key:0},[a(d,{style:{margin:"8px 2px"}}),a(y),a(d)],64)):(i(),p(S,{key:1})),a(C)]),_:1}))}});export{R as default};

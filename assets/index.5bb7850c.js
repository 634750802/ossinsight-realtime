import{f as m,n as g,H as v,d as f,w as b,l as E,g as p,I as _,o as i,j as a,J as k,u as F,c as I,F as M}from"./index.9c45d513.js";import{u as h}from"./Numbers.6cfe9762.js";import{F as x}from"./flex.8d91f8b4.js";import{S as w,D as d,E as y,F as S,a as C}from"./side-footer.b0c15c6b.js";import"./gh-repo.vue_vue_type_script_setup_true_lang.0d85e94a.js";const R=m({__name:"side",setup(D){const c=g("pullRequestEvents"),l=h(),n=c(),u=v(),e=f({developers:0,repositories:0,merged:0,opened:0,closed:0,additions:0,deletions:0});function o(s){return Object.values(s).reduce((r,t)=>r+parseInt(t),0)}return b(n.firstMessage,s=>{s&&(e.developers=parseInt(s.sumMap.dev),e.repositories=parseInt(s.sumMap.repo),e.additions=parseInt(s.sumMap.additions),e.deletions=parseInt(s.sumMap.deletions),e.merged=o(s.mergeMap),e.opened=o(s.openMap),e.closed=o(s.closeMap))},{immediate:!0}),E(s=>{if(l.value){const r=n.stream.subscribe(t=>{switch(t.isDevYear&&e.developers++,t.isRepoYear&&e.repositories++,t.prEventType){case"merged":e.merged++,e.additions+=parseInt(t.additions),e.deletions+=parseInt(t.deletions);break;case"opened":e.opened++;break;case"closed":e.closed++;break}});s(()=>r.unsubscribe())}}),(s,r)=>(i(),p(x,{class:"side-container"},{default:_(()=>[a(w,k(e,{time:`in ${new Date().getUTCFullYear()}`}),null,16,["time"]),F(u).height>=400?(i(),I(M,{key:0},[a(d,{style:{margin:"8px 2px"}}),a(y),a(d)],64)):(i(),p(S,{key:1})),a(C)]),_:1}))}});export{R as default};

import{f as m,n as g,H as v,d as b,w as f,l as E,g as p,I as _,o as n,j as a,J as k,u as I,c as M,F as h}from"./index.831b1831.js";import{u as x}from"./gh-repo.vue_vue_type_script_setup_true_lang.5cecea7d.js";import{F,S as w,D as d,E as y,a as S,b as C}from"./side-footer.93f2c8d0.js";const j=m({__name:"side",setup(D){const c=g("pullRequestEvents"),l=x(),i=c(),u=v(),e=b({developers:0,repositories:0,merged:0,opened:0,closed:0,additions:0,deletions:0});function o(s){return Object.values(s).reduce((r,t)=>r+parseInt(t),0)}return f(i.firstMessage,s=>{s&&(e.developers=parseInt(s.sumMap.dev),e.repositories=parseInt(s.sumMap.repo),e.additions=parseInt(s.sumMap.additions),e.deletions=parseInt(s.sumMap.deletions),e.merged=o(s.mergeMap),e.opened=o(s.openMap),e.closed=o(s.closeMap))},{immediate:!0}),E(s=>{if(l.value){const r=i.stream.subscribe(t=>{switch(t.isDevYear&&e.developers++,t.isRepoYear&&e.repositories++,t.prEventType){case"merged":e.merged++,e.additions+=parseInt(t.additions),e.deletions+=parseInt(t.deletions);break;case"opened":e.opened++;break;case"closed":e.closed++;break}});s(()=>r.unsubscribe())}}),(s,r)=>(n(),p(F,{class:"side-container"},{default:_(()=>[a(w,k(e,{time:`in ${new Date().getUTCFullYear()}`}),null,16,["time"]),I(u).height>=420?(n(),M(h,{key:0},[a(d,{style:{margin:"8px 2px"}}),a(y),a(d)],64)):(n(),p(S,{key:1})),a(C)]),_:1}))}});export{j as default};
